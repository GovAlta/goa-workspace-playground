@import "@abgov/web-components/index.css";

/* ============================================================================
   BREAKPOINT VARIABLES
   ============================================================================
   Note: CSS cannot use JS constants, so this must be kept in sync with
   src/constants/breakpoints.ts (MOBILE_BREAKPOINT = 624)
   ============================================================================ */
:root {
  --mobile-breakpoint: 624px;
}

/* ============================================================================
   APP LAYOUT
   ============================================================================ */

/* Main app container */
.app-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
  background-color: #F8F8F8;
}

/* Card container - wraps content area */
.card-container {
  flex: 1;
  overflow: auto;
}

/* Mobile: no padding */
@media (max-width: 623px) {
  .card-container {
    padding: 0;
  }
}

/* Desktop: padding on right, top, bottom */
@media (min-width: 624px) {
  .card-container {
    padding: 20px 20px 20px 0;
  }
}

/* Mobile content wrapper */
.mobile-content {
  background-color: white;
  min-height: 100vh;
}

/* Desktop card container */
.desktop-card-container {
  background-color: white;
  border: 1px solid #E9E9E9;
  border-radius: 24px;
  height: calc(100vh - 40px);
  overflow-x: auto;
  overflow-y: auto;
}

/* ============================================================================
   TABLE CELL ALIGNMENT
   ============================================================================
   This CSS provides classes to properly align different component types
   within GoA Table cells by adjusting padding to achieve exact cell heights
   and vertically center components.

   Usage: Apply the appropriate class to <td> elements based on content type
   Example: <td className="goa-table-cell--input">...</td>
   ============================================================================ */

/* ============================================================================
   NORMAL VARIANT (Target: 48px cell height)
   ============================================================================
   Component heights and calculated padding:
   - Text: 28px → 10px padding
   - Checkbox: 24px → 12px padding
   - Input/Dropdown: 42px → 3px padding
   - Badge: 22px → 13px padding
   - Button/Icon Button: 32px → 8px padding

   Formula: padding = (48px - component_height) / 2
   Must override table default: padding: 8px 16px 8px 16px
   ============================================================================ */

/* Text cells (28px component height) */
goa-table td.goa-table-cell--text {
  padding: 10px 16px 10px 16px !important;
}

/* Checkbox cells (24px component height) */
goa-table td.goa-table-cell--checkbox {
  padding: 12px 16px 12px 16px !important;
}

/* Input cells - text and number inputs (42px component height) */
goa-table td.goa-table-cell--input {
  padding: 3px 16px 3px 16px !important;
}

/* Badge cells (22px component height) */
goa-table td.goa-table-cell--badge {
  padding: 13px 16px 13px 16px !important;
}

/* Dropdown cells (42px component height) */
goa-table td.goa-table-cell--dropdown {
  padding: 3px 16px 3px 16px !important;
}

/* Button cells - compact buttons (32px component height) */
goa-table td.goa-table-cell--button {
  padding: 8px 16px 8px 16px !important;
}

/* Icon button cells (32px component height) */
goa-table td.goa-table-cell--icon-button {
  padding: 8px 16px 8px 16px !important;
}

/* ============================================================================
   RELAXED VARIANT (Target: 64px cell height)
   ============================================================================
   Component heights and calculated padding:
   - Text: 28px → 18px padding
   - Checkbox: 24px → 20px padding
   - Input/Dropdown: 42px → 11px padding
   - Badge: 22px → 21px padding
   - Button/Icon Button: 32px → 16px padding

   Formula: padding = (64px - component_height) / 2
   Must override table default for relaxed: padding: 16px
   ============================================================================ */

/* Text cells (28px component height) */
goa-table[variant="relaxed"] td.goa-table-cell--text {
  padding: 18px 16px 18px 16px !important;
}

/* Checkbox cells (24px component height) */
goa-table[variant="relaxed"] td.goa-table-cell--checkbox {
  padding: 20px 16px 20px 16px !important;
}

/* Input cells - text and number inputs (42px component height) */
goa-table[variant="relaxed"] td.goa-table-cell--input {
  padding: 11px 16px 11px 16px !important;
}

/* Badge cells (22px component height) */
goa-table[variant="relaxed"] td.goa-table-cell--badge {
  padding: 21px 16px 21px 16px !important;
}

/* Dropdown cells (42px component height) */
goa-table[variant="relaxed"] td.goa-table-cell--dropdown {
  padding: 11px 16px 11px 16px !important;
}

/* Button cells - compact buttons (32px component height) */
goa-table[variant="relaxed"] td.goa-table-cell--button {
  padding: 16px 16px 16px 16px !important;
}

/* Icon button cells (32px component height) */
goa-table[variant="relaxed"] td.goa-table-cell--icon-button {
  padding: 16px 16px 16px 16px !important;
}

/* Table zebra striping - even rows */
goa-table table tbody tr:nth-child(even) td {
  background-color: var(--goa-color-greyscale-50) !important;
}

/* ============================================================================
   NOTES FOR IMPLEMENTATION
   ============================================================================

   1. The !important flag is used to override GoA Table's default padding.
      When implementing in the design system CSS, this may not be necessary
      if the rules are placed after the default table styles.

   2. All padding values maintain the table's default horizontal padding (16px)
      while adjusting vertical padding to achieve exact cell heights.

   3. Padding values are symmetric (top = bottom) to vertically center components.

   4. These classes work with the GoA Table's existing vertical-align: top,
      which ensures proper text wrapping behavior when content spans multiple lines.

   5. Component heights measured:
      - Checkbox: 24px
      - Input (text/number): 42px
      - Badge: 22px
      - Dropdown: 42px
      - Compact Button: 32px
      - Icon Button: 32px
      - Text (body-m): 28px
   ============================================================================ */

/* ============================================================================
   PAGE LAYOUTS
   ============================================================================
   Using GoA Design System spacing tokens for consistent spacing.
   Mobile breakpoint: 624px (matches the app's isMobile logic)
   ============================================================================ */

/* Filter section - contains tabs and search input */
.clients-filter-section {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  align-items: stretch;
  margin-top: var(--goa-space-m);
  padding: 0 var(--goa-space-m);
  gap: var(--goa-space-m);
  flex-wrap: wrap;
}

@media (min-width: 624px) {
  .clients-filter-section {
    flex-direction: row;
    align-items: flex-start;
    margin-top: var(--goa-space-m); /* Reduced to align better with header */
    gap: var(--goa-space-xl);
  }
}

/* Filter chips container */
.clients-chips-container {
  display: flex;
  align-items: center;
  gap: var(--goa-space-xs);
  margin-top: var(--goa-space-m);
  margin-bottom: var(--goa-space-m);
  padding: 0 var(--goa-space-m);
}

@media (min-width: 624px) {
  .clients-chips-container {
    padding: 0 2rem; /* Match content padding */
  }
}

/* Clients page layout */
.clients-page {
  padding-left: 32px;
}

/* Table wrapper with right margin */
.clients-table-wrapper {
  margin-right: 32px;
}

/* Table cell utilities */
.goa-table-cell--nowrap {
  white-space: nowrap;
}

.goa-table-cell--capitalize {
  text-transform: capitalize;
}

.goa-table-cell--notes {
  white-space: nowrap;
  min-width: 200px;
}

/* Table header checkbox alignment */
goa-table th.goa-table-header--checkbox {
  padding-bottom: 0;
}

/* 404 Not Found page */
.not-found-page {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 60vh;
  text-align: center;
  padding: var(--goa-space-xl);
}


/* ============================================================================
   SCROLL CONTAINER - Horizontal scroll shadows with gradient overlays
   ============================================================================ */

.scroll-container {
  position: relative;
  max-width: 100%;
}

/* Ensure the table inside doesn't shrink and add right margin for spacing at scroll edge */
.scroll-container > * {
  min-width: max-content;
  margin-right: 32px;
}

/* Shadow overlay elements - fixed position, dynamically positioned by JS */
.scroll-shadow {
  position: fixed;
  width: 40px;
  pointer-events: none;
  z-index: 100;
  transition: opacity 0.2s ease;
}

/* Left shadow gradient */
.scroll-shadow--left {
  background: linear-gradient(to right, rgba(0, 0, 0, 0.18), transparent);
}

/* Right shadow gradient */
.scroll-shadow--right {
  background: linear-gradient(to left, rgba(0, 0, 0, 0.18), transparent);
}

/* ============================================================================
   PAGE HEADER
   ============================================================================ */

/* Sentinel element for intersection observer */
.page-header-sentinel {
  height: 0;
}

/* Header container base styles */
.page-header {
  position: static;
  background-color: transparent;
  padding: 1rem 1rem 0 1rem;
  margin-bottom: var(--goa-space-m);
  transition: all 0.3s ease;
  borderRadius: "24px",
}

/* Desktop: Header is always sticky within scroll container */
@media (min-width: 624px) {
  .desktop-card-container .page-header {
    position: sticky;
    top: 0;
    left: 0;
    z-index: 1000; /** Larger than shadow **/
    background-color: white;
    padding: 16px 16px 16px 32px;
    transition: box-shadow 0.2s ease;
    /* Expand to full scrollable width when content is wider than viewport */
    min-width: fit-content;
  }

  .desktop-card-container .page-header--sticky {
    border-bottom: 1px solid #EDEFF3;
  }

  /* Content wrapper - default state */
  .desktop-card-container .content-wrapper {
    position: relative;
    transition: border-radius 0.3s ease, margin-top 0.3s ease;
  }

  /* Content container gets rounded corners when scrolled under sticky header */
  .desktop-card-container.content-scrolled .content-wrapper {
    border-radius: 24px 24px 0 0;
    margin-top: 8px;
    background-color: #f8f8f8;
    clip-path: inset(0 0 -10px 0); /* Clip bottom shadow if any */
  }

  /* Optional: Add subtle shadow to emphasize the separation */
  .desktop-card-container.content-scrolled .content-wrapper::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 24px;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.05), transparent);
    border-radius: 24px 24px 0 0;
    pointer-events: none;
  }

  /* Scroll position shadows - apply to GoabPageBlock when sticky */
  /* At top: shadow at bottom indicating more content below */
  .desktop-card-container .page-header--sticky.page-header--top {
    box-shadow: 0 4px 6px -2px rgba(0, 0, 0, 0.15);
  }

  /* At bottom: shadow at top indicating content above, nothing below */
  .desktop-card-container .page-header--sticky.page-header--bottom {
    box-shadow: inset 0 -4px 6px -4px rgba(0, 0, 0, 0.1);
  }

  /* In middle: shadows on both sides indicating content above and below */
  .desktop-card-container .page-header--sticky.page-header--middle {
    box-shadow: 0 4px 6px -2px rgba(0, 0, 0, 0.15),
                inset 0 -4px 6px -4px rgba(0, 0, 0, 0.05);
  }
}

/* Mobile header styles */
@media (max-width: 623px) {
  .page-header {
    background-color: white;
    padding: var(--goa-space-m);
    margin-bottom: 0;
    transition: box-shadow 0.2s ease;
  }

  /* Sticky header on mobile - fixed to viewport */
  .page-header--sticky {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
  }

  /* Scroll position shadows for mobile - only apply when sticky */
  /* At top: shadow at bottom indicating more content below */
  .page-header--sticky.page-header--top {
    box-shadow: 0 4px 6px -2px rgba(0, 0, 0, 0.15);
  }

  /* At bottom: shadow at top indicating content above, nothing below */
  .page-header--sticky.page-header--bottom {
    box-shadow: inset 0 -4px 6px -4px rgba(0, 0, 0, 0.1);
  }

  /* In middle: shadows on both sides indicating content above and below */
  .page-header--sticky.page-header--middle {
    box-shadow: 0 4px 6px -2px rgba(0, 0, 0, 0.15),
                inset 0 -4px 6px -4px rgba(0, 0, 0, 0.05);
  }
}

/* Header content container */
.page-header__content {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: var(--goa-space-m);
}

@media (min-width: 624px) {
  .page-header__content {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    gap: 0;
    /* Ensure content expands to full width when scrollable */
    min-width: fit-content;
  }
}

/* Title container with menu button */
.page-header__title-container {
  display: flex;
  align-items: center;
  gap: var(--goa-space-m);
}

@media (min-width: 624px) {
  .page-header__title-container {
    /* Sticky title - stays visible during horizontal scroll */
    position: sticky;
    left: 32px;
    background: inherit;
    z-index: 1;
  }
}

/* Align menu icon to content edge on mobile by compensating for button's internal padding */
@media (max-width: 623px) {
  .page-header__title-container > goa-icon-button:first-child {
    margin-left: -12px;
  }
}

/* Spacer element - pushes actions to the right in desktop mode */
.page-header__spacer {
  flex: 1;
  min-width: 1rem;
}

/* Actions container */
.page-header__actions {
  display: block;
  width: 100%;
}

@media (min-width: 624px) {
  .page-header__actions {
    display: flex;
    gap: var(--goa-space-s);
    flex-wrap: wrap;
    justify-content: flex-end;
    width: auto;
    /* Sticky actions - stay visible during horizontal scroll */
    position: sticky;
    right: 1rem;
    background: inherit;
  }
}

